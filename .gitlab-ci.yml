before_script:
  - make

.abstract_tests:
  image: $PHP_IMAGE:$PHP_VERSION
  script:
    - make test

test:8.0-lower:
  extends: .abstract_tests
  variables:
    PHP_VERSION: '8.0'
    DEPENDENCIES: lowest

test:8.0-upper:
  extends: .abstract_tests
  variables:
    PHP_VERSION: '8.0'
  script:
    - make test
    - make qa

test:8.1-lower:
  extends: .abstract_tests
  variables:
    PHP_VERSION: '8.1'
    DEPENDENCIES: lowest

test:8.1-upper:
  extends: .abstract_tests
  variables:
    PHP_VERSION: '8.1'
  script:
    - make test
    - make qa

test:8.2-lower:
  extends: .abstract_tests
  variables:
    PHP_VERSION: '8.2'
    DEPENDENCIES: lowest

test:8.2-upper:
  extends: .abstract_tests
  variables:
    PHP_VERSION: '8.2'
  script:
    - make test
    - make qa
